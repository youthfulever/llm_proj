<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Test Vue3 Layout</title>
    <!-- 在线引入vue3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- 在线引入axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
	/* 设置整个页面的高度为100%并添加背景颜色 */
html, body {
    height: 100%;
    margin: 0;
    background-color: #fffcf2; /* 淡黄色背景色 */
}
        /* 设置整个页面的高度为100% */
        html, body {
            height: 100%;
            margin: 0;
        }
        /* 使用flexbox将内容垂直水平居中 */
        #app {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            position: relative; /* 确保#app是position:relative，使得绝对定位的子元素相对于它定位 */
        }
        .content-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 50px; /* 调整此值以增加上边距 */
		}
        img {
            max-width: 100%;
            max-height: 150px;
        }
        [v-cloak] {
            display: none;
        }
        .login-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
        }
        .knowledge-import-btn {
            position: fixed;
            bottom: 10px;
            right: 10px;
            padding: 10px 20px;
        }
        /* 输入对话框气泡样式 */
        .input-bubble {
            background-color: #e6ffe6; /* 淡绿色背景 */
            border-radius: 10px;
            padding: 20px;
            margin-top: 10px;
            width: 150%; /* 根据需要调整宽度 */
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .input-bubble input {
            border: none;
            outline: none;
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            margin-right: 10px;
        }
        .input-bubble::after {
			content: '';
			position: absolute;
			bottom: -10px; /* 三角形与气泡底部的距离 */
			right: 20px; /* 这里由left改为了right，并设置适当的值 */
			width: 0;
			height: 0;
			border: 10px solid transparent;
			border-top-color: #e6ffe6; /* 与气泡背景颜色相同 */
			border-bottom: 0;
			margin-right: -10px; /* 如果需要对齐调整，可以调节这个值 */
		}
        /* 修改后的输出对话框样式，颜色改为和去掉的按钮气泡一样 */
        .chat-bubble {
            background-color: #d9f2ff; /* 改为此颜色 */
            border-radius: 10px;
            padding: 20px;
            margin-top: 10px;
            width: 150%; /* 根据需要调整宽度 */
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .chat-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #d9f2ff; /* 颜色也相应修改 */
            border-bottom: 0;
            margin-left: -10px;
        }
		/* 输入对话框气泡样式 */
.input-bubble {
    /* 现有样式保持不变 */
    position: relative; /* 确保可以使用left/right定位 */
    left: -150px; /* 将输入对话框气泡向左移动 */
}

/* 输出对话框样式 */
.chat-bubble {
    /* 现有样式保持不变 */
    position: relative; /* 确保可以使用left/right定位 */
    left: 150px; /* 将输出对话框气泡向右移动 */
}
/* 调整登录按钮样式 */
.login-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 10px 20px;
    background-color: #4CAF50; /* 设置背景颜色 */
    color: white; /* 文字颜色 */
    border: none;
    cursor: pointer;
    border-radius: 5px; /* 圆角边框 */
    font-size: 16px; /* 字体大小 */
}

/* 鼠标悬停时改变背景颜色 */
.login-btn:hover {
    background-color: #45a049;
}

/* 调整知识导入按钮样式 */
.knowledge-import-btn {
    position: fixed;
    bottom: 10px;
    right: 10px;
    padding: 10px 20px;
    background-color: #f44336; /* 设置不同的背景颜色 */
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    font-size: 16px;
}

/* 鼠标悬停时改变背景颜色 */
.knowledge-import-btn:hover {
    background-color: #e53935;
}


/* 输入对话框气泡内的按钮样式 */
.input-bubble button {
    padding: 5px 10px; /* 减少内边距使按钮变小 */
    margin: 3px; /* 减少外边距 */
    border: none;
    cursor: pointer;
    border-radius: 5px;
    font-size: 14px; /* 减小字体大小 */
}

/* 发送按钮样式 */
.input-bubble button:nth-child(2) { /* 假设发送按钮是第二个按钮 */
    background-color: #4CAF50; /* 绿色背景 */
    color: white;
}

/* 鼠标悬停时改变发送按钮的背景颜色 */
.input-bubble button:nth-child(2):hover {
    background-color: #45a049;
}

/* 清空按钮样式 */
.input-bubble button:nth-child(3) { /* 假设清空按钮是第三个按钮 */
    background-color: #f44336; /* 红色背景 */
    color: white;
}

/* 鼠标悬停时改变清空按钮的背景颜色 */
.input-bubble button:nth-child(3):hover {
    background-color: #e53935;
}
.title-text {
    font-weight: bold; /* 加粗文字 */
    color: #333; /* 设置文字颜色 */
    margin-bottom: 40px; /* 增加下边距 */
    margin-top: -80px; /* 增加下边距 */
    text-align: center; /* 文字居中对齐 */
}
    </style>
</head>
<body>
<div id="app" v-cloak>
    <div class="content-container">
    <!-- 添加标题 -->
    <div class="title-text">大模型的智能检索问答的频谱知识管理系统</div>
    <!-- 图片 -->
    <img src="https://tse2-mm.cn.bing.net/th/id/OIP-C.kwe67ZMuwckeP13CfQ2cbAAAAA?rs=1&pid=ImgDetMain" alt="描述图片"/>
	 <br />
    <!-- 输入对话框气泡 -->
    <div class="input-bubble">
        <input type="text" v-model="inputValue"/>
        <button @click="handleClick">发送</button> <!-- 发送按钮 -->
        &nbsp;
        <button @click="clearInput">清空</button> <!-- 清空按钮 -->
    </div>
    
    <!-- 输出对话框 -->
    <div class="chat-bubble">{{ outputMessage }}</div>
</div>
</div>

<script>
    const { createApp, ref } = Vue;
const app = createApp({
    setup() {
        const inputValue = ref('');
        const outputMessage = ref(''); // 新增响应式变量
        
        const handleClick = () => {
            axios.post('http://127.0.0.1:8000/chat', {
                mes: inputValue.value
            })
            .then(function (response) {
                // 处理成功情况
                console.log(response.data);
                outputMessage.value = '服务器回复：' + response.data.response;
            })
            .catch(function (error) {
                // 处理错误情况
                console.error(error);
                outputMessage.value = '发送失败，请检查网络连接或服务器状态';
            });
        };
        
        const clearInput = () => {
            inputValue.value = '';
            outputMessage.value = '';
        };

        return {
            inputValue,
            outputMessage,
            handleClick,
            clearInput
        }
    }
})
app.mount("#app");
</script>
</body>
</html>